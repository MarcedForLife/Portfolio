<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>KillShot - Marc Tucker - Portfolio</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "KillShot";
    var mkdocs_page_input_path = "killshot.md";
    var mkdocs_page_url = "/killshot/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Marc Tucker - Portfolio</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Home</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">KillShot</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#killshot">KillShot</a></li>
                
            
                <li class="toctree-l3"><a href="#background">Background</a></li>
                
            
                <li class="toctree-l3"><a href="#screenshots">Screenshots</a></li>
                
            
                <li class="toctree-l3"><a href="#videos">Videos</a></li>
                
            
                <li class="toctree-l3"><a href="#code">Code</a></li>
                
            
                <li class="toctree-l3"><a href="#downloads">Downloads</a></li>
                
            
                <li class="toctree-l3"><a href="#references">References</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../shamballs/">Shamballs</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../resume/">Resume</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Marc Tucker - Portfolio</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>KillShot</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="killshot">KillShot</h1>
<p>KillShot is a small game where you recieve contracts to kill a target, the more skilled the takedown the better the grade you recieve at the end.
The target will usually be protected and hard to reach. However, this is no problem for you, you are the best of the best. </p>
<h1 id="background">Background</h1>
<p>I created KillShot for an independent assignment at the Auckland University of Technology. This project was my first time making a 2D game and my first time using the following technologies and langauges:</p>
<ul>
<li>
<p>C++</p>
</li>
<li>
<p>SDL</p>
</li>
<li>
<p>Box2D</p>
</li>
<li>
<p>FMOD </p>
</li>
</ul>
<p>Using all of the above for the my first time was a huge learning experience and assisted me to ultimately produce something I am very proud of. However, even though I am proud of KillShot due to my scope for the project being quite large for the given timeframe I wasn't able to finish KillShot the way I had hoped.</p>
<h1 id="screenshots">Screenshots</h1>
<p>Main Menu:
<img alt="image" src="../img/KillShotMain.png" /></p>
<p>In-Game Contract:
<img alt="image" src="../img/KillShotContract.png" /></p>
<p>In-Game Editor:
<img alt="image" src="../img/KillShotEditor.png" /></p>
<h1 id="videos">Videos</h1>
<p>Comming soon</p>
<h1 id="code">Code</h1>
<p>Bellow I have provided the source code I wrote for the AI pawn controllers in KillShot:</p>
<pre><code>#include &quot;AIController.h&quot;

#include &quot;Box2D.h&quot;
#include &quot;RayCast.h&quot;

AIController::AIController(Pawn* pawnToPosses, Pawn* playerCharacter)
{
    possesPawn(pawnToPosses);
    this-&gt;playerCharacter = playerCharacter;
}

void 
AIController::possesPawn(Pawn* pawnToPosses)
{
    possesedPawn = pawnToPosses;
}

void 
AIController::changeState(AIState newState)
{
    currentState = newState;
    stateTimeElapsed = 0.0f;
}

void 
AIController::Process(float deltaTime)
{
    if (possesedPawn &amp;&amp; playerCharacter)
    {
        stateTimeElapsed += deltaTime;
        coolDownRemaining -= deltaTime;

        // If the player is touching the possed pawn, change the pawns state to alerted
        for (b2ContactEdge* ce = possesedPawn-&gt;GetCollisionBody()-&gt;GetContactList(); ce != NULL; ce = ce-&gt;next)
        {
            Pawn* tmp = static_cast&lt;Pawn*&gt;(ce-&gt;other-&gt;GetUserData());
            if (tmp &amp;&amp; tmp-&gt;GetPawnType() == PawnType::PLAYER)
                changeState(ALERTED);
        }

        // If the pawn is alerted or is facing the players location, send a ray cast to see if the pawn can see the player.
        if (currentState == ALERTED || (possesedPawn-&gt;IsHFlipped() &amp;&amp; playerCharacter-&gt;GetPositionX() &lt;= possesedPawn-&gt;GetPositionX()) || (!possesedPawn-&gt;IsHFlipped() &amp;&amp; playerCharacter-&gt;GetPositionX() &gt;= possesedPawn-&gt;GetPositionX()))
        {
            b2Vec2 playerLocation = playerCharacter-&gt;GetCollisionBody()-&gt;GetPosition();
            b2Vec2 possesionLocation = possesedPawn-&gt;GetCollisionBody()-&gt;GetPosition();

            RayCast callback;

            possesedPawn-&gt;GetCollisionBody()-&gt;GetWorld()-&gt;RayCast(&amp;callback, possesionLocation, playerLocation);

            if (callback.m_hit)
            {
                Pawn* tmp = static_cast&lt;Pawn*&gt;(callback.closestBody-&gt;GetUserData());

                // Check whether the raycast found the player before any other obstructions
                if (tmp &amp;&amp; tmp-&gt;GetPawnType() == PawnType::PLAYER)
                { 
                    if (possesedPawn-&gt;IsWeaponEquiped())
                    {
                        changeState(ATTACKING);

                        switch (possesedPawn-&gt;GetCurrentWeapon()-&gt;GetWeaponType())
                        {
                        case WeaponType::KNIFE:
                            possesedPawn-&gt;SetHorizontalInput((playerCharacter-&gt;GetPositionX() &gt; possesedPawn-&gt;GetPositionX()) ? 1.0f : -1.0f);
                            possesedPawn-&gt;SetPawnLookVector(playerCharacter-&gt;GetPositionX(), playerCharacter-&gt;GetPositionY(), false);
                            break;
                        case WeaponType::PISTOL:
                            possesedPawn-&gt;SetPawnLookVector(playerCharacter-&gt;GetPositionX(), playerCharacter-&gt;GetPositionY(), false);
                            if (coolDownRemaining &lt;= 0.0f)
                            {
                                possesedPawn-&gt;PrimaryAttack();
                                coolDownRemaining = attackCoolDown;
                            }
                            break;
                        }       
                    }
                    else
                    {
                        changeState(ALERTED);
                        possesedPawn-&gt;SetPawnLookVector(playerCharacter-&gt;GetPositionX(), playerCharacter-&gt;GetPositionY(), false);
                    }

                }
                else
                {
                    possesedPawn-&gt;SetHorizontalInput(0.0f);

                    if (currentState == ATTACKING)
                        changeState(ALERTED);

                    if (stateTimeElapsed &gt;= 3.0f)
                    {
                        changeState(IDLE);
                        possesedPawn-&gt;SetPawnLookVector(1.0f, 0.01f, true);
                    }
                }
            }
        }
        else
        {
            possesedPawn-&gt;SetHorizontalInput(0.0f);

            if (stateTimeElapsed &gt;= 3.0f)
            {
                changeState(IDLE);
                possesedPawn-&gt;SetPawnLookVector(1.0f, 0.01f, true);
            }
        }
    }
}

</code></pre>

<h1 id="downloads">Downloads</h1>
<p>Download the latest playable alpha build here: <a href="https://www.dropbox.com/s/ado31byz3y2vqiu/KillShot%20-%20Alpha.rar?dl=0">KillShot - Alpha</a></p>
<h1 id="references">References</h1>
<p>Catto, E. (2015). Box2D | A 2D Physics Engine for Games. [online] Box2d.org. 
Available at: http://box2d.org/ [Accessed 23 Oct. 2016].</p>
<p>Fmod.org. (2016). FMOD. [online] 
Available at: http://www.fmod.org/ [Accessed 23 Oct. 2016].</p>
<p>YouTube. (2016). NoCopyrightSounds. [online] 
Available at: https://www.youtube.com/user/NoCopyrightSounds [Accessed 23 Oct. 2016].</p>
<p>OpenGameArt.org. (2016). OpenGameArt.org. [online] 
Available at: http://opengameart.org/ [Accessed 23 Oct. 2016].</p>
<p>Libsdl.org. (2016). Simple DirectMedia Layer - Homepage. [online] 
Available at: https://www.libsdl.org/ [Accessed 23 Oct. 2016].</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../shamballs/" class="btn btn-neutral float-right" title="Shamballs">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href=".." class="btn btn-neutral" title="Home"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href=".." style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../shamballs/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
